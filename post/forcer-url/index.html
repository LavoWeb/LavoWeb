<!DOCTYPE html>
<html class="no-js" lang="fr-fr">
<head lang="fr-fr">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=10"/>
    <title>Forcer « nouvelles » URL</title>
    <link rel="canonical" href="http://lavoweb.net/post/forcer-url/">
    <meta property="og:url" content="http://lavoweb.net/">
    <meta property="og:title" content="Forcer « nouvelles » URL">
    <meta property="og:image" content="http://lavoweb.net/images/referencement_magento_grand.png">
    <meta name="apple-mobile-web-app-title" content="Forcer « nouvelles » URL">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://lavoweb.net/favicon_referencement_magento.png">
    <link rel="icon" type="image/x-icon" href="http://lavoweb.net/favicon_referencement_magento.png">

    <link rel="stylesheet" href="http://lavoweb.net/stylesheets/style.min.css">

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">

    
    <meta name="generator" content="Hugo 0.41-DEV" />

</head>
<body class="palette-primary-red palette-accent-teal">


<div class="backdrop">
    <div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
    <nav aria-label="Header">
        <div class="bar default">
            <div class="button button-menu" role="button" aria-label="Menu">
                <label class="toggle-button icon icon-menu" for="toggle-drawer">
                    <span></span>
                </label>
            </div>
            <div class="stretch">
                <div class="title">
                    Agence Web Magento - LavoWeb
                </div>
            </div>


            <div class="button button-twitter" role="button" aria-label="Twitter">
                <a href="https://twitter.com/LavoWeb" title="@LavoWeb on Twitter" target="_blank"
                   class="toggle-button icon icon-twitter"></a>
            </div>


            <div class="button button-github" role="button" aria-label="GitHub">
                <a href="https://github.com/LavoWeb" title="@LavoWeb on GitHub" target="_blank"
                   class="toggle-button icon icon-github"></a>
            </div>


        </div>
    </nav>
</header>

<main class="main">
    <div class="drawer">
        <nav aria-label="Navigation">
            <a href="http://lavoweb.net/" class="project">
                <div class="banner">

                    <div class="logo">
                        <img src="http://lavoweb.net/images/developpement-magento.png" alt="Agence Magento" />
                    </div>

                    <div class="name">
                        <strong>Agence Web Magento - LavoWeb </strong>

                    </div>
                </div>
            </a>

            <div class="scrollable">
                <div class="wrapper">


                    <div class="toc">
                        <ul>
    <li>
        
        <a  title="Agence Web" href="http://lavoweb.net/">
            Agence Web
        </a>
        
    </li>
    <li>
        
        <a  title="Développement Magento" href="http://lavoweb.net/developpement/">
            Développement Magento
        </a>
        
    </li>
    <li>
        
        <a  title="Hébergement Magento" href="http://lavoweb.net/hebergement/">
            Hébergement Magento
        </a>
        
    </li>
    <li>
        
        <a  title="Hébergement Magento" href="http://lavoweb.net/referencement/">
            Référencement e-commerce
        </a>
        
    </li>
    <li>
        
        
        <a class="current" title="Articles" href="http://lavoweb.net/post/">
            Articles
        </a>
        
            <ul id="scrollspy"></ul>
        
    </li>
</ul>
                        <hr>
                        <span class="section">L'entreprise</span>

                        <ul>

                            <li>
                                <a href="mailto:aurelien@lavoweb.net" title="Email of aurelien@lavoweb.net">
                                    Contacter via email
                                </a>
                            </li>

                        </ul>

                    </div>
                </div>
            </div>
        </nav>

    </div>

    <article class="article">
        <div class="wrapper">
	<div class="section section-content" id="section-content">
		<div class="title-block">
			<h1 class="title-big">Forcer « nouvelles » URL</h1>
		</div>
		<div class="container">
			<div class="row">
				<div class="col-md-12 about-info">
					

<p>Quand on a une boutique Magento depuis un bon moment, il arrive souvent que les urls du site aient changé quelques fois depuis l’ouverture du site. On navigue donc avec les « mauvaises » (ou anciennes) urls ce qui entraîne une redirection à chaque clic. Le visiteur ou le moteur de recherche perd donc du temps ce qui peut entraîner une baisse du taux de conversion ou une moins bonne indexation de votre e-commerce.</p>

<p>Pour contrer ce problème, j’exécute de temps en temps un script qui permets de synchroniser les nouvelles urls sur toute la boutique.</p>

<h2 id="cas-traités">Cas traités</h2>

<ul>
<li><p>Changement du domaine du site.</p></li>

<li><p>Duplication de produits.</p></li>

<li><p>Changements de l’arbre des catégories.</p></li>

<li><p>Modification de la clé d’url à la main.</p></li>
</ul>

<p>Pour le point 3, une petite explication s’impose. Imaginons un produit a qui a comme url a.html.</p>

<p>On veut faire un produit b qui a exactement les mêmes caractéristiques que le produit a. En général, pour gagner du temps, on dupliquera ce produit et on modifiera, au minimum, son sku. Rare sont les personnes qui pensent à modifier l’url directement.</p>

<p>Magento remarque qu’il y a deux produits qui ont une clé d’url égale à a. Il va donc faire une variation :</p>

<p>a-1234
a-1235
On est content, il n’y a plus de problèmes. Sauf qu’à la prochaine ré-indexation de la table core_url_rewrite, magento changera les urls pour ne pas les dupliquer. On aura donc, par exemple :</p>

<p>a-1236
a-1237
Avec une ré-indexation chaque nuit, ça pose de gros problèmes pour de grosses boutiques. On arrive rapidement à une table très grosse ce qui provoque une chute des performances.</p>

<h2 id="le-principe">Le principe</h2>

<p>On cherche dans le texte de Magento toutes les urls et on regarde dans la base de donnée si c’est bien le plus court chemin possible, dans le cas contraire, on remplace l’url actuelle.</p>

<h2 id="le-module">Le module</h2>

<p>Il est disponible sur github. je ne pourrait pas être tenu responsable d’une mauvaise manipulation. Si vous ne comprenez pas ce qu’il fait ou comment il marche, n’hésitez pas à me contacter.</p>

				</div>
			</div>
			<div class="row">
				<div class="col-md-12 about-info">
					
					
					<h3>Voir</h3>
					<ul>
						
						<li><a href="http://lavoweb.net/post/ce-ee/">Comment décider entre Magento CE (open-source) et EE (version payante) ?</a></li>
						
						<li><a href="http://lavoweb.net/post/installer-magento/">Installer Magento</a></li>
						
					</ul>
					
				</div>
			</div>
		</div>
	</div>


<aside class="copyright" role="note">

	&copy; 2018

</aside>

<footer class="footer">
	<div>
		<p>Agence Web sur Annecy, Bourget-du-Lac, Chambéry et <a href="https://lumao.eu/">Genève</a>. 835 305 657 R.C.S. ANNECY</p>
	</div>
</footer>
</div>
</article>

<div class="results" role="status" aria-live="polite">
	<div class="scrollable">
		<div class="wrapper">
			<div class="meta"></div>
			<div class="list"></div>
		</div>
	</div>
</div>
</main>

<script>

    var base_url = '';
    var repo_id  = '';

</script>

<script src="http://lavoweb.net/javascripts/scripts.min.js"></script>


<script>
     
    var headers   = document.getElementsByTagName("h2");
    var scrollspy = document.getElementById('scrollspy');

    if(scrollspy) {
        if(headers.length > 0) {
            for(var i = 0; i < headers.length; i++) {
                var li = document.createElement("li");
                li.setAttribute("class", "anchor");

                var a  = document.createElement("a");
                a.setAttribute("href", "#" + headers[i].id);
                a.setAttribute("title", headers[i].innerHTML);
                a.innerHTML = headers[i].innerHTML;

                li.appendChild(a)
                scrollspy.appendChild(li);
            }
        } else {
            scrollspy.parentElement.removeChild(scrollspy)
        }


         
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
    }
</script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</html>

